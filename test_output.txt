  Determining projects to restore...
  All projects are up-to-date for restore.
  TicketMasala.Domain -> /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Domain/bin/Debug/net10.0/TicketMasala.Domain.dll
  TicketMasala.Web -> /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Web/bin/Debug/net10.0/TicketMasala.Web.dll
  TicketMasala.Tests -> /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/bin/Debug/net10.0/TicketMasala.Tests.dll
Test run for /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/bin/Debug/net10.0/TicketMasala.Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.1-dev (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.25]     TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests.Get_All_WorkContainers_Returns_Success_And_Json [FAIL]
  Failed TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests.Get_All_WorkContainers_Returns_Success_And_Json [1 ms]
  Error Message:
   System.InvalidOperationException : Services for database providers 'Microsoft.EntityFrameworkCore.Sqlite', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService(IInfrastructure`1 accessor, Type serviceType)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.AccessorExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.get_Dependencies()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.EnsureCreated()
   at TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests.<>c.<.ctor>b__3_1(IServiceCollection services) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/Functional/WorkContainersApiFunctionalTests.cs:line 48
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.HostBuilderAdapter.ApplyChanges()
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Web/Program.cs:line 82
   at Program.<Main>(String[] args)
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.DelegatedWebApplicationFactory.CreateHost(IHostBuilder builder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.StartServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests..ctor(WebApplicationFactory`1 factory, ITestOutputHelper output) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/Functional/WorkContainersApiFunctionalTests.cs:line 67
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Constructor(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Standard Output Messages:
 Detailed Error Creating Client: System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.Sqlite', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
    at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
    at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
    at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
    at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
    at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService(IInfrastructure`1 accessor, Type serviceType)
    at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService[TService](IInfrastructure`1 accessor)
    at Microsoft.EntityFrameworkCore.Infrastructure.AccessorExtensions.GetService[TService](IInfrastructure`1 accessor)
    at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.get_Dependencies()
    at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.EnsureCreated()
    at TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests.<>c.<.ctor>b__3_1(IServiceCollection services) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/Functional/WorkContainersApiFunctionalTests.cs:line 48
    at Microsoft.Extensions.Hosting.HostApplicationBuilder.HostBuilderAdapter.ApplyChanges()
    at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
    at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
    at Program.<Main>$(String[] args) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Web/Program.cs:line 82
    at Program.<Main>(String[] args)
    at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
    at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
 --- End of stack trace from previous location ---
    at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
    at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
    at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.DelegatedWebApplicationFactory.CreateHost(IHostBuilder builder)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.StartServer()
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
    at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
    at TicketMasala.Tests.Functional.WorkContainersApiFunctionalTests..ctor(WebApplicationFactory`1 factory, ITestOutputHelper output) in /home/juan/coding/garamatic/ticket-masala/src/TicketMasala.Tests/Functional/WorkContainersApiFunctionalTests.cs:line 67



Failed!  - Failed:     1, Passed:     0, Skipped:     0, Total:     1, Duration: 159 ms - TicketMasala.Tests.dll (net10.0)
